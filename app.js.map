{"version":3,"sources":["webpack:///app.js","webpack:///./src/index.js"],"names":["webpackJsonp",0,"module","exports","__webpack_require__",74,"R","mainContent","document","getElementById","topBanner","bottomBanner","noAddCounter","createDiv","createElement","bootApp","face","src","className","id","appendChild","createAdd","add","createSomeAdverts","count","someAdds","map","range","adverts","forEach","getRandomInt","min","max","Math","floor","random","removeChildren","el","firstChild","removeChild","displaySomeAdds","Promise","resolve","pauseForAddBlocker","setTimeout","addsVissable","reduce","acc","computedStyles","getComputedStyle","display","getElementsByClassName","checkAddsDisplayed","Error","incNoAddCounter","console","warn","dealWithAddBlocker","error","classList","annoyUserWithAdds","then","setInterval",192],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GAE/BA,EAAoB,IACpBF,EAAOC,QAAUC,EAAoB,MAKhCC,GACA,SAASH,EAAQC,EAASC,GAE/B,YCdD,IAAME,GAAIF,EAAQ,IAEZG,EAAcC,SAASC,eAAe,eAC1CC,EAAYF,SAASC,eAAe,aACpCE,EAAeH,SAASC,eAAe,gBAErCG,EAAe,EAEbC,EAAY,WDiBf,MCjBqBL,UAASM,cAAc,QAEzCC,EAAU,WACd,GAAIC,GAAOR,SAASM,cAAc,MAClCE,GAAKC,IAAM,uEACXD,EAAKE,UAAY,QACjBF,EAAKG,GAAK,QACVZ,EAAYa,YAAYJ,IAGpBK,EAAY,WAChB,GAAIC,GAAMT,GAEV,OADAS,GAAIJ,UAAY,SACTI,GAGHC,EAAoB,SAACC,GAEzB,GAAMC,GAAWnB,EAAEoB,IACjBL,EACAf,EAAEqB,MAAM,EAAGH,IAGPI,EAAUf,GAQhB,OAPAe,GAAQV,UAAY,UAEpBZ,EAAEuB,QACA,SAAAP,GDeC,MCfMM,GAAQR,YAAYE,IAC3BG,GAGKG,GAGHE,EAAe,SAACC,EAAKC,GDexB,MCfgCC,MAAKC,MAAMD,KAAKE,UAAYH,EAAMD,EAAM,IAAMA,GAE3EK,EAAiB,SAACC,GACtB,KAAOA,EAAGC,YACRD,EAAGE,YAAYF,EAAGC,aAIhBE,EAAkB,WACtB,MAAO,IAAIC,SAAQ,SAACC,GAClBN,EAAe1B,GACf0B,EAAezB,GACfD,EAAUU,YAAYG,EAAkBO,EAAa,EAAG,MACxDnB,EAAaS,YAAYG,EAAkBO,EAAa,EAAG,MAC3DY,OAIEC,EAAqB,WACzB,MAAO,IAAIF,SAAQ,SAACC,GAClBE,WAAW,WDiBR,MCjBcF,MAAW,QAI1BG,EAAe,WDmBlB,MCnBwBvC,GAAEwC,OAC3B,SAACC,EAAKV,GACJ,GAAMW,GAAiBC,iBAAiBZ,EAD7B,OAGoB,SAA3BW,EAAeE,WAGZH,MAGTvC,SAAS2C,uBAAuB,aAG5BC,EAAqB,WACzB,MAAO,IAAIX,SAAQ,SAACC,GAClB,IAAIG,IAIF,KAAM,IAAIQ,OAAM,mBAHhBzC,GAAe,EACf8B,OAOAY,EAAkB,WAGtB,MAFAC,SAAQC,KAAK,qBACb5C,GAAgB,GAIZ6C,EAAqB,WACrB7C,EAAe,IACjB2C,QAAQG,MAAM,0CACdlD,SAASC,eAAe,SAASkD,UAAUrC,IAAI,aAI7CsC,EAAoB,WACxBnB,QAAQC,UACLmB,KAAKrB,GACLqB,KAAKlB,GACLkB,KAAKT,GAHRX,SAISa,GACNO,KAAKJ,GAGV1C,KAEA+C,YACE,WDWC,MCXKF,MACN,MDeIG,IACA,SAAS7D,EAAQC","file":"app.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(74);\n\tmodule.exports = __webpack_require__(192);\n\n\n/***/ },\n\n/***/ 74:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar R = __webpack_require__(73);\n\t\n\tvar mainContent = document.getElementById('mainContent'),\n\t    topBanner = document.getElementById('topBanner'),\n\t    bottomBanner = document.getElementById('bottomBanner');\n\t\n\tvar noAddCounter = 0;\n\t\n\tvar createDiv = function createDiv() {\n\t  return document.createElement('div');\n\t};\n\t\n\tvar bootApp = function bootApp() {\n\t  var face = document.createElement('img');\n\t  face.src = 'https://pbs.twimg.com/profile_images/454962828600803328/jXG0H97g.png';\n\t  face.className = 'troll';\n\t  face.id = 'troll';\n\t  mainContent.appendChild(face);\n\t};\n\t\n\tvar createAdd = function createAdd() {\n\t  var add = createDiv();\n\t  add.className = 'advert';\n\t  return add;\n\t};\n\t\n\tvar createSomeAdverts = function createSomeAdverts(count) {\n\t\n\t  var someAdds = R.map(createAdd, R.range(1, count));\n\t\n\t  var adverts = createDiv();\n\t  adverts.className = 'adverts';\n\t\n\t  R.forEach(function (add) {\n\t    return adverts.appendChild(add);\n\t  }, someAdds);\n\t\n\t  return adverts;\n\t};\n\t\n\tvar getRandomInt = function getRandomInt(min, max) {\n\t  return Math.floor(Math.random() * (max - min + 1)) + min;\n\t};\n\t\n\tvar removeChildren = function removeChildren(el) {\n\t  while (el.firstChild) {\n\t    el.removeChild(el.firstChild);\n\t  }\n\t};\n\t\n\tvar displaySomeAdds = function displaySomeAdds() {\n\t  return new Promise(function (resolve) {\n\t    removeChildren(topBanner);\n\t    removeChildren(bottomBanner);\n\t    topBanner.appendChild(createSomeAdverts(getRandomInt(1, 10)));\n\t    bottomBanner.appendChild(createSomeAdverts(getRandomInt(1, 10)));\n\t    resolve();\n\t  });\n\t};\n\t\n\tvar pauseForAddBlocker = function pauseForAddBlocker() {\n\t  return new Promise(function (resolve) {\n\t    setTimeout(function () {\n\t      return resolve();\n\t    }, 500);\n\t  });\n\t};\n\t\n\tvar addsVissable = function addsVissable() {\n\t  return R.reduce(function (acc, el) {\n\t    var computedStyles = getComputedStyle(el);\n\t    // rule engine for deciding if adds are actaully visable\n\t    if (computedStyles.display === 'none') {\n\t      return false;\n\t    }\n\t    return acc;\n\t  }, true, document.getElementsByClassName('adverts'));\n\t};\n\t\n\tvar checkAddsDisplayed = function checkAddsDisplayed() {\n\t  return new Promise(function (resolve) {\n\t    if (addsVissable()) {\n\t      noAddCounter = 0;\n\t      resolve();\n\t    } else {\n\t      throw new Error('no adds detected');\n\t    }\n\t  });\n\t};\n\t\n\tvar incNoAddCounter = function incNoAddCounter() {\n\t  console.warn('cant find adverts');\n\t  noAddCounter += 1;\n\t  return noAddCounter;\n\t};\n\t\n\tvar dealWithAddBlocker = function dealWithAddBlocker() {\n\t  if (noAddCounter > 5) {\n\t    console.error('Unable to display adds after 5 attemps');\n\t    document.getElementById('troll').classList.add('unhappy');\n\t  }\n\t};\n\t\n\tvar annoyUserWithAdds = function annoyUserWithAdds() {\n\t  Promise.resolve().then(displaySomeAdds).then(pauseForAddBlocker).then(checkAddsDisplayed).catch(incNoAddCounter).then(dealWithAddBlocker);\n\t};\n\t\n\tbootApp();\n\t\n\tsetInterval(function () {\n\t  return annoyUserWithAdds();\n\t}, 3000);\n\n/***/ },\n\n/***/ 192:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** app.js\n **/","const R = require('ramda');\n\nconst mainContent = document.getElementById('mainContent'),\n  topBanner = document.getElementById('topBanner'),\n  bottomBanner = document.getElementById('bottomBanner');\n\nlet noAddCounter = 0;\n\nconst createDiv = () => document.createElement('div');\n\nconst bootApp = () => {\n  var face = document.createElement('img');\n  face.src = 'https://pbs.twimg.com/profile_images/454962828600803328/jXG0H97g.png';\n  face.className = 'troll';\n  face.id = 'troll';\n  mainContent.appendChild(face);\n};\n\nconst createAdd = () => {\n  var add = createDiv();\n  add.className = 'advert';\n  return add;\n};\n\nconst createSomeAdverts = (count) => {\n\n  const someAdds = R.map(\n    createAdd,\n    R.range(1, count)\n  );\n\n  const adverts = createDiv();\n  adverts.className = 'adverts';\n\n  R.forEach(\n    add => adverts.appendChild(add),\n    someAdds\n  );\n\n  return adverts;\n};\n\nconst getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;\n\nconst removeChildren = (el) => {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n};\n\nconst displaySomeAdds = () => {\n  return new Promise((resolve) => {\n    removeChildren(topBanner);\n    removeChildren(bottomBanner);\n    topBanner.appendChild(createSomeAdverts(getRandomInt(1, 10)));\n    bottomBanner.appendChild(createSomeAdverts(getRandomInt(1, 10)));\n    resolve();\n  });\n};\n\nconst pauseForAddBlocker = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => resolve(), 500);\n  });\n};\n\nconst addsVissable = () => R.reduce(\n  (acc, el) => {\n    const computedStyles = getComputedStyle(el);\n// rule engine for deciding if adds are actaully visable\n    if (computedStyles.display === 'none') {\n      return false;\n    }\n    return acc;\n  },\n  true,\n  document.getElementsByClassName('adverts')\n);\n\nconst checkAddsDisplayed = () => {\n  return new Promise((resolve) => {\n    if (addsVissable()) {\n      noAddCounter = 0;\n      resolve();\n    } else {\n      throw new Error('no adds detected');\n    }\n  });\n};\n\nconst incNoAddCounter = () => {\n  console.warn('cant find adverts');\n  noAddCounter += 1;\n  return noAddCounter;\n};\n\nconst dealWithAddBlocker = () => {\n  if (noAddCounter > 5) {\n    console.error('Unable to display adds after 5 attemps');\n    document.getElementById('troll').classList.add('unhappy');\n  }\n};\n\nconst annoyUserWithAdds = () => {\n  Promise.resolve()\n    .then(displaySomeAdds)\n    .then(pauseForAddBlocker)\n    .then(checkAddsDisplayed)\n    .catch(incNoAddCounter)\n    .then(dealWithAddBlocker);\n};\n\nbootApp();\n\nsetInterval(\n  () => annoyUserWithAdds(),\n  3000\n);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":""}